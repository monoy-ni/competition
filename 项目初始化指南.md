# 政务新媒体AI内容工厂 - 项目初始化指南

## 1. 环境准备

### 1.1 开发环境要求
- Node.js >= 18.0.0
- npm >= 8.0.0 或 yarn >= 1.22.0
- Git >= 2.30.0
- VS Code (推荐编辑器)

### 1.2 必要工具安装
```bash
# 安装Vite (如果未安装)
npm install -g create-vite

# 安装Supabase CLI (用于本地开发)
npm install -g supabase

# 安装TypeScript (如果未安装)
npm install -g typescript
```

## 2. 项目初始化

### 2.1 创建React项目
```bash
# 创建项目
create-vite gov-ai-content-factory --template react-ts

# 进入项目目录
cd gov-ai-content-factory

# 安装基础依赖
npm install
```

### 2.2 安装核心依赖包
```bash
# UI组件库
npm install antd @ant-design/icons

# 样式框架
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Supabase客户端
npm install @supabase/supabase-js

# 图表库
npm install echarts echarts-for-react

# 富文本编辑器
npm install react-quill quill

# 状态管理
npm install zustand

# 路由
npm install react-router-dom

# HTTP请求
npm install axios

# 日期处理
npm install dayjs

# 文件上传
npm install react-dropzone
```

### 2.3 配置Tailwind CSS
编辑 `tailwind.config.js`:
```javascript
/** @type {import('tailwindcss').Config} */
export default {
  content: [
    "./index.html",
    "./src/**/*.{js,ts,jsx,tsx}",
  ],
  theme: {
    extend: {
      colors: {
        primary: '#1E40AF',
        secondary: '#3B82F6',
        success: '#10B981',
        warning: '#F59E0B',
        error: '#EF4444',
      },
      fontFamily: {
        sans: ['Microsoft YaHei', 'system-ui', 'sans-serif'],
      },
    },
  },
  plugins: [],
}
```

### 2.4 配置Ant Design主题
创建 `src/config/antdTheme.ts`:
```typescript
export const antdTheme = {
  token: {
    colorPrimary: '#1E40AF',
    colorSuccess: '#10B981',
    colorWarning: '#F59E0B',
    colorError: '#EF4444',
    fontFamily: 'Microsoft YaHei, system-ui, sans-serif',
    borderRadius: 6,
  },
  components: {
    Layout: {
      headerBg: '#1E40AF',
      headerColor: '#ffffff',
      siderBg: '#f8fafc',
    },
    Menu: {
      itemSelectedBg: '#3B82F6',
      itemSelectedColor: '#ffffff',
    },
  },
};
```

## 3. 项目结构搭建

### 3.1 目录结构
```
src/
├── components/          # 通用组件
│   ├── Layout/         # 布局组件
│   ├── Common/         # 通用UI组件
│   └── Charts/         # 图表组件
├── pages/              # 页面组件
│   ├── Home/           # 首页
│   ├── ContentGenerate/# 内容生成
│   ├── ContentEdit/    # 内容编辑
│   ├── ContentAudit/   # 内容审核
│   ├── DataAnalysis/   # 数据分析
│   ├── AssetManage/    # 资产管理
│   └── UserManage/     # 用户管理
├── hooks/              # 自定义Hooks
├── stores/             # 状态管理
├── services/           # API服务
├── utils/              # 工具函数
├── config/             # 配置文件
├── types/              # TypeScript类型定义
└── assets/             # 静态资源
```

### 3.2 基础配置

创建 `src/config/index.ts`:
```typescript
export const config = {
  appName: '政务新媒体AI内容工厂',
  version: '1.0.0',
  apiUrl: import.meta.env.VITE_API_URL || 'http://localhost:3000',
  supabase: {
    url: import.meta.env.VITE_SUPABASE_URL || '',
    anonKey: import.meta.env.VITE_SUPABASE_ANON_KEY || '',
  },
  ai: {
    openaiKey: import.meta.env.VITE_OPENAI_KEY || '',
    baiduAIKey: import.meta.env.VITE_BAIDU_AI_KEY || '',
  },
};
```

创建 `.env` 文件:
```bash
VITE_SUPABASE_URL=your_supabase_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
VITE_OPENAI_KEY=your_openai_key
VITE_BAIDU_AI_KEY=your_baidu_ai_key
```

## 4. 核心功能开发

### 4.1 Supabase集成
创建 `src/services/supabase.ts`:
```typescript
import { createClient } from '@supabase/supabase-js';
import { config } from '@/config';

export const supabase = createClient(
  config.supabase.url,
  config.supabase.anonKey
);

// 用户认证相关
export const auth = {
  signIn: (email: string, password: string) => 
    supabase.auth.signInWithPassword({ email, password }),
  
  signOut: () => supabase.auth.signOut(),
  
  getCurrentUser: () => supabase.auth.getUser(),
};

// 内容管理相关
export const content = {
  getList: (page: number, pageSize: number) =>
    supabase
      .from('contents')
      .select('*')
      .range((page - 1) * pageSize, page * pageSize - 1)
      .order('created_at', { ascending: false }),
  
  create: (data: any) =>
    supabase.from('contents').insert(data),
  
  update: (id: string, data: any) =>
    supabase.from('contents').update(data).eq('id', id),
  
  delete: (id: string) =>
    supabase.from('contents').delete().eq('id', id),
};
```

### 4.2 路由配置
创建 `src/router/index.tsx`:
```typescript
import { createBrowserRouter } from 'react-router-dom';
import { Layout } from '@/components/Layout';
import { Home } from '@/pages/Home';
import { ContentGenerate } from '@/pages/ContentGenerate';
import { ContentEdit } from '@/pages/ContentEdit';
import { ContentAudit } from '@/pages/ContentAudit';
import { DataAnalysis } from '@/pages/DataAnalysis';
import { AssetManage } from '@/pages/AssetManage';
import { UserManage } from '@/pages/UserManage';
import { Login } from '@/pages/Login';

export const router = createBrowserRouter([
  {
    path: '/login',
    element: <Login />,
  },
  {
    path: '/',
    element: <Layout />,
    children: [
      { index: true, element: <Home /> },
      { path: 'content-generate', element: <ContentGenerate /> },
      { path: 'content-edit', element: <ContentEdit /> },
      { path: 'content-audit', element: <ContentAudit /> },
      { path: 'data-analysis', element: <DataAnalysis /> },
      { path: 'asset-management', element: <AssetManage /> },
      { path: 'user-management', element: <UserManage /> },
    ],
  },
]);
```

### 4.3 主应用配置
修改 `src/main.tsx`:
```typescript
import React from 'react';
import ReactDOM from 'react-dom/client';
import { RouterProvider } from 'react-router-dom';
import { ConfigProvider } from 'antd';
import { router } from './router';
import { antdTheme } from './config/antdTheme';
import './index.css';

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <ConfigProvider theme={antdTheme}>
      <RouterProvider router={router} />
    </ConfigProvider>
  </React.StrictMode>
);
```

## 5. 开发环境配置

### 5.1 VS Code配置
创建 `.vscode/settings.json`:
```json
{
  "typescript.preferences.importModuleSpecifier": "relative",
  "editor.formatOnSave": true,
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "files.associations": {
    "*.css": "tailwindcss"
  }
}
```

创建 `.vscode/extensions.json`:
```json
{
  "recommendations": [
    "bradlc.vscode-tailwindcss",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-typescript-next"
  ]
}
```

### 5.2 Git配置
创建 `.gitignore`:
```
# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Production build
dist/
build/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
logs/
*.log

# Runtime data
pids/
*.pid
*.seed
*.pid.lock
```

## 6. 开发启动

### 6.1 启动开发服务器
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 访问应用
# 打开浏览器访问 http://localhost:5173
```

### 6.2 构建生产版本
```bash
# 构建生产版本
npm run build

# 预览构建结果
npm run preview
```

## 7. 开发规范

### 7.1 代码规范
- 使用TypeScript进行类型检查
- 遵循React Hooks最佳实践
- 组件命名使用PascalCase
- 变量和函数使用camelCase
- 常量使用UPPER_SNAKE_CASE

### 7.2 提交规范
使用Conventional Commits规范:
```
feat: 添加新功能
fix: 修复bug
docs: 文档更新
style: 代码格式调整
refactor: 代码重构
test: 测试相关
chore: 构建过程或辅助工具的变动
```

### 7.3 文件命名
- React组件: `ComponentName.tsx`
- 工具函数: `utilName.ts`
- 样式文件: `style.css` 或 `ComponentName.module.css`
- 测试文件: `ComponentName.test.tsx`

## 8. 后续开发计划

### 8.1 第一阶段 (第1-2周)
- [ ] 完成基础框架搭建
- [ ] 实现用户认证和权限管理
- [ ] 开发内容生成模块
- [ ] 创建基础UI组件库

### 8.2 第二阶段 (第3-4周)
- [ ] 实现内容编辑和排版功能
- [ ] 开发内容审核系统
- [ ] 集成数据分析功能
- [ ] 完善资产管理模块

### 8.3 第三阶段 (第5周)
- [ ] 系统测试和bug修复
- [ ] 性能优化和代码重构
- [ ] 文档完善和部署准备
- [ ] Demo演示环境搭建

## 9. 常见问题解决

### 9.1 依赖安装失败
```bash
# 清除npm缓存
npm cache clean --force

# 删除node_modules重新安装
rm -rf node_modules
npm install
```

### 9.2 TypeScript类型错误
```bash
# 重新生成类型定义
npx tsc --init

# 检查tsconfig.json配置
```

### 9.3 构建失败
```bash
# 检查环境变量配置
# 确保所有必要的环境变量都已设置

# 清除构建缓存
rm -rf dist
npm run build
```

## 10. 技术支持

如遇到技术问题，请参考以下资源：
- [Vite官方文档](https://vitejs.dev/)
- [React官方文档](https://react.dev/)
- [Ant Design组件库](https://ant.design/)
- [Tailwind CSS文档](https://tailwindcss.com/)
- [Supabase文档](https://supabase.com/docs)